<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Favicon -->
  <link rel="apple-touch-icon" sizes="57x57" href="/assets/images/favicons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/assets/images/favicons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/assets/images/favicons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/assets/images/favicons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/assets/images/favicons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/assets/images/favicons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/assets/images/favicons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/assets/images/favicons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicons/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/assets/images/favicons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/assets/images/favicons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicons/favicon-16x16.png">
<link rel="manifest" href="/assets/images/favicons/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/assets/images/favicons/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">


  <!-- Meta information -->
  <title>Enforcing Single Responsibility Principle in Python</title>
  <meta name="description"
        content="">
  <link rel="canonical"
        href="http://localhost:4000/2019/03/enforcing-srp" />

  <!-- Open search scheme -->
  <link rel="search"
        type="application/opensearchdescription+xml"
        title="sobolevn.me"
        href="/opensearch.xml" />

  <!-- Feed -->
  <link rel="alternate" type="application/rss+xml" title="sobolevn's personal blog"
        href="/feed.xml" />

  <!-- Custom fonts -->
  <link href="https://fonts.googleapis.com/css?family=Merriweather:400,400i,900|Roboto+Mono:400,400i|Montserrat:400,800" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">

  <!-- Custom style -->
  <link rel="stylesheet" href="/css/main.css" />

  <!-- Global site tag (gtag.js) - Google Ads: 839642990 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=AW-839642990"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'AW-839642990');
  </script>
</head>


  <body>
    <main class="u-container">
      <div class="c-page">
  <header class="c-page__header">
  <h1><code>sobolevn's personal blog</code></h1>

  

  <nav role="navigation">
    <a href="/" role="menuitem">
      Blog
    </a>

    <span class="u-separate"></span>
    <a href="/talks/" role="menuitem">
      Talks
    </a>

    <span class="u-separate"></span>
    <a href="/activities/" role="menuitem">
      Activities
    </a>

    <span class="u-separate"></span>
    <a href="/about/" role="menuitem">
      About
    </a>

    <span class="u-separate"></span>
    <a href="/subscribe/" role="menuitem">
      Subscribe
    </a>
  </nav>
</header>

  <div class="c-page__main">
    <article class="c-article" itemscope="" itemtype="http://schema.org/BlogPosting">
  <header class="c-article__header">
    <h1 class="c-article__title" itemprop="name">Enforcing Single Responsibility Principle in Python</h1>
    <p class="c-article__time">
      <small>
        <time datetime="2019-03-10T00:00:00+05:30" itemprop="datePublished">
          March 10, 2019
        </time>
      </small>
      <small><span class="reading-time" title="Estimated read time">
  
  
    21 mins
   read
</span>
</small>
      <small><a href="#discussion">Start a discussion</a></small>
      <small><a href="https://github.com/sobolevn/sobolevn.github.io/blob/master/_posts/2019-03-10-enforcing-srp.md">Edit this page</a></small>
    </p>
  </header>

  <!-- Post Tags -->
  <!-- <ul class="c-tags">
    
    <li class="c-tag">python</li>
    
  </ul> -->

  <!-- Content -->
  <div class="c-article__main">

    
      
      
      <div class="post-translate">
        <h4>Translated to:</h4>
        <ul>
        
          <li>
            <a class="c-article__repost" href="https://dev-gang.ru/article/primenenie-principa-edinoi-otvetstvennosti-v-python-sytp3516rx/" target="_blank">
              Russian <img class="emoji" title=":ru:" alt=":ru:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f1f7-1f1fa.png" height="20" width="20">
            </a>
            
          </li>
        
        </ul>
      </div>
      
    

    <div class="c-article__body" itemprop="articleBody">
      <p><img src="https://images.unsplash.com/photo-1516981879613-9f5da904015f?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=1334&amp;q=80" alt="Article logo"></p>

<p>Single Responsibility Principle (or SRP) is one of the most important concepts in software development. The main idea of this concept is: all pieces of software must have only a single responsibility.</p>

<p>Why SRP is important? It is the main idea that stands behind software development. Decompose complex tasks to the set of simple building blocks to compose complex software from them back again. Just like we can compose lego or builtin functions:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s">'Input number: '</span><span class="p">)))</span>
</code></pre></div></div>

<p>This article will guide you through a complex process of writing simple code. I personally consider this article rather complicated and hard to percept if you do not have a solid background in <code class="language-plaintext highlighter-rouge">python</code>, so it is split into several parts:</p>
<ol>
  <li>Definition of simple building block</li>
  <li>Problems with the functional composition in <code class="language-plaintext highlighter-rouge">python</code>
</li>
  <li>Introduction to callable objects to solve functional composition problems</li>
  <li>Dependency injection example that reduces the boilerplate code of callable objects</li>
</ol>

<p>It is okay to stop after each piece, revise it and to get to the latter one, because it will ensure you get the point, or at least first proof-readings showed so.
Please do not hesitate to suggest edits or to ask questions. This topic is not covered so well and I will be glad to clarify anything.</p>


      <h2 id="defining-building-blocks">
        
        <a class="anchor" href="#defining-building-blocks">Defining building blocks</a>
        
      </h2>

<p>Let’s start with defining what are these “pieces of software” and “simplest building blocks” I am talking about?</p>

<p>The simplest building blocks are usually language’s expressions and statements. We can literally compose everything from it. But, we cannot fully rely on them since they are too simple. And we do not want to have repeated code all over the place. So we invent functions to abstract these simplest language constructs into something more meaningful that we can actually work with.</p>

<p>We expect these simplest building blocks (read “functions”) to be composable. And to be easily composable they must respect Single Responsibility Principle. Otherwise, we would have troubles. Because you can not compose things that do several things when you only need a part of them.</p>


    
      <h2 id="functions-can-be-complex-too">
        
        <a class="anchor" href="#functions-can-be-complex-too">Functions can be complex too</a>
        
      </h2>

<p>Now, let’s make sure we can really rely on functions as simple building blocks.</p>

<p>We probably already know that functions can grow complex too and we have all seen absolutely unreadable functions like <a href="https://github.com/sobolevn/python-code-disasters/blob/7f8c856073e746cb79193df90ba2eb5f2eb144e7/python/create_objects.py#L1">this one</a>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">create_objects</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">send</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">data</span> <span class="k">if</span> <span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
    <span class="n">keys</span> <span class="o">=</span> <span class="p">[</span><span class="s">'{}:{}'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="o">*</span><span class="n">r</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">data</span><span class="p">]</span>

    <span class="n">existing_objects</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">Object</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="nb">filter</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">key__in</span><span class="o">=</span><span class="n">keys</span><span class="p">).</span><span class="n">values_list</span><span class="p">(</span><span class="s">'key'</span><span class="p">,</span> <span class="s">'uid'</span><span class="p">))</span>

    <span class="k">with</span> <span class="n">transaction</span><span class="p">.</span><span class="n">commit_on_success</span><span class="p">():</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">uid</span><span class="p">),</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">izip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">keys</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">existing_objects</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">pid</span><span class="p">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">'_'</span><span class="p">):</span>
                        <span class="n">result</span> <span class="o">=</span> <span class="n">Result</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">pid</span><span class="o">=</span><span class="n">pid</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">result</span> <span class="o">=</span> <span class="n">Result</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="nb">filter</span><span class="p">(</span>
                            <span class="n">Q</span><span class="p">(</span><span class="n">barcode</span><span class="o">=</span><span class="n">pid</span><span class="p">)</span> <span class="o">|</span> <span class="n">Q</span><span class="p">(</span><span class="n">oid</span><span class="o">=</span><span class="n">pid</span><span class="p">)).</span><span class="n">latest</span><span class="p">(</span><span class="s">'created'</span><span class="p">)</span>
                <span class="k">except</span> <span class="n">Result</span><span class="p">.</span><span class="n">DoesNotExist</span><span class="p">:</span>
                    <span class="n">logger</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="s">"Can't find result [%s] for w [%s]"</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
                    <span class="k">continue</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="n">t</span> <span class="o">=</span> <span class="n">Object</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="n">w</span><span class="p">,</span> <span class="n">result</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">result</span><span class="p">.</span><span class="n">container</span><span class="p">.</span><span class="n">is_co</span><span class="p">:</span>
                        <span class="n">code</span> <span class="o">=</span> <span class="n">result</span><span class="p">.</span><span class="n">container</span><span class="p">.</span><span class="n">co</span><span class="p">.</span><span class="n">num</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">code</span> <span class="o">=</span> <span class="n">name_code</span>
                    <span class="n">t</span> <span class="o">=</span> <span class="n">Object</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="n">create</span><span class="p">(</span>
                        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="n">w</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                        <span class="n">result</span><span class="o">=</span><span class="n">result</span><span class="p">,</span> <span class="n">uid</span><span class="o">=</span><span class="n">uid</span><span class="p">,</span> <span class="n">name_code</span><span class="o">=</span><span class="n">code</span><span class="p">)</span>

                    <span class="n">reannounce</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">result</span><span class="p">.</span><span class="n">expires_date</span> <span class="ow">or</span> <span class="p">(</span>
                          <span class="n">result</span><span class="p">.</span><span class="n">registry</span><span class="p">.</span><span class="n">is_sending</span>
                          <span class="ow">and</span> <span class="n">result</span><span class="p">.</span><span class="n">status</span> <span class="ow">in</span> <span class="p">[</span><span class="n">Result</span><span class="p">.</span><span class="n">C</span><span class="p">,</span> <span class="n">Result</span><span class="p">.</span><span class="n">W</span><span class="p">]):</span>
                        <span class="n">Client</span><span class="p">().</span><span class="n">Update</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="n">result</span><span class="p">.</span><span class="n">is_blocked</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">result</span><span class="p">.</span><span class="n">in_container</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">send</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">result</span><span class="p">.</span><span class="n">status</span> <span class="o">==</span> <span class="n">Result</span><span class="p">.</span><span class="n">STATUS1</span><span class="p">:</span>
                            <span class="n">Result</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="nb">filter</span><span class="p">(</span>
                                <span class="nb">id</span><span class="o">=</span><span class="n">result</span><span class="p">.</span><span class="nb">id</span>
                            <span class="p">).</span><span class="n">update</span><span class="p">(</span>
                                 <span class="n">status</span><span class="o">=</span><span class="n">Result</span><span class="p">.</span><span class="n">STATUS2</span><span class="p">,</span>
                                 <span class="n">on_way_back_date</span><span class="o">=</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">())</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">started</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

            <span class="k">elif</span> <span class="n">uid</span> <span class="o">!=</span> <span class="n">existing_objects</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="ow">and</span> <span class="n">uid</span><span class="p">:</span>
                <span class="n">t</span> <span class="o">=</span> <span class="n">Object</span><span class="p">.</span><span class="n">objects</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
                <span class="n">t</span><span class="p">.</span><span class="n">uid</span> <span class="o">=</span> <span class="n">uid</span>
                <span class="n">t</span><span class="p">.</span><span class="n">name_code</span> <span class="o">=</span> <span class="n">name_code</span>
                <span class="n">t</span><span class="p">.</span><span class="n">save</span><span class="p">()</span>
                <span class="n">reannounce</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</code></pre></div></div>

<p>It really works and powers someone’s production system. However, we can still say that this function definitely has more than one responsibility and should be refactored. But how do we make this decision?
There are different formal methods to track functions like this, including:</p>

<ul>
  <li><a href="https://en.wikipedia.org/wiki/Cyclomatic_complexity">Cyclomatic complexity</a></li>
  <li><a href="https://en.wikipedia.org/wiki/Halstead_complexity_measures">Halstead complexity</a></li>
  <li>Arguments, statements, returns count</li>
  <li>Body length limits</li>
</ul>

<p>After we apply these methods it would be clear to us that this function is too complex. And we won’t be able to compose it easily. It is possible (and recommended) to go further and to automate this process. That’s how code-quality tools work with <a href="https://github.com/wemake-services/wemake-python-styleguide"><code class="language-plaintext highlighter-rouge">wemake-python-styleguide</code></a> as a notable example.</p>

<p>Just use it. It will detect all the hidden complexity and will not allow your code to rot.</p>

<p>Here’s the less obvious example of a function that does several things and breaks SRP (and, sadly, things like that can not be automated at all, code reviews are the only way to find this kind of issues):</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">calculate_price</span><span class="p">(</span><span class="n">products</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Product</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Decimal</span><span class="p">:</span>
    <span class="s">"""Returns the final price of all selected products (in rubles)."""</span>
    <span class="n">price</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">product</span> <span class="ow">in</span> <span class="n">products</span><span class="p">:</span>
       <span class="n">price</span> <span class="o">+=</span> <span class="n">product</span><span class="p">.</span><span class="n">price</span>

    <span class="n">logger</span><span class="p">.</span><span class="n">log</span><span class="p">(</span><span class="s">'Final price is: {0}'</span><span class="p">,</span> <span class="n">price</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">price</span>
</code></pre></div></div>

<p>Look at this <code class="language-plaintext highlighter-rouge">logger</code> variable. How did it make its way into the function’s body? It is not an argument. It is just a hard-coded behavior. What if I do not want to log this specific price for some reason? Should I disable it with an argument flag?</p>

<p>In case I will try to do that, I will end up with something like this:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">calculate_price</span><span class="p">(</span><span class="n">products</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Product</span><span class="p">],</span> <span class="n">log</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">...</span>
    <span class="p">...</span>
</code></pre></div></div>

<p>Congratulations, we now have <a href="https://martinfowler.com/bliki/FlagArgument.html">a well-known anti-pattern</a> in our code. Do not use boolean flags. They are bad.</p>

<p>Moreover, how do I test this function? Without this <code class="language-plaintext highlighter-rouge">logger.log</code> call it would be a perfectly testable pure function. Something goes in and I can predict what will go out. And now it is impure. To test that <code class="language-plaintext highlighter-rouge">logger.log</code> actually works I would have to mock it somehow and assert that log was created.</p>

<p>You may argue that <code class="language-plaintext highlighter-rouge">logger</code> in <code class="language-plaintext highlighter-rouge">python</code> has a global configuration just for this case. But, it is a dirty solution to the same problem.</p>

<p>Such a mess just because of a single line! The problem with this function is that it is hard to notice this double responsibility. If we rename this function from <code class="language-plaintext highlighter-rouge">calculate_price</code> to proper <code class="language-plaintext highlighter-rouge">calculate_and_log_price</code> it would become obvious that this function does not respect SRP. And the rule is that simple: if “correct and full” function name contains <code class="language-plaintext highlighter-rouge">and</code>, <code class="language-plaintext highlighter-rouge">or</code>, or <code class="language-plaintext highlighter-rouge">then</code> – it is a good candidate for refactoring.</p>

<p>Ok, this is all scary and stuff, but what to do with this case in general? How can we change the behavior of this function so it will finally respect SRP?</p>

<p>I would say that the only way to achieve SRP is composition: compose different functions together so each of them would do just one thing, but their composition would do all the things we want.</p>

<p>Let’s see different patterns that we can use to compose functions in <code class="language-plaintext highlighter-rouge">python</code>.</p>


    
      <h3 id="decorators">
        
        <a class="anchor" href="#decorators">Decorators</a>
        
      </h3>

<p>We can use the decorator pattern to compose functions together.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">log</span><span class="p">(</span><span class="s">'Final price is: {0}'</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">calculate_price</span><span class="p">(...)</span> <span class="o">-&gt;</span> <span class="p">...:</span>
    <span class="p">...</span>
</code></pre></div></div>

<p>What consequences this pattern has?</p>

<ol>
  <li>It not just composes, but glues functions together. This way you won’t have an ability to actually run just <code class="language-plaintext highlighter-rouge">calculate_price</code> without <code class="language-plaintext highlighter-rouge">log</code>
</li>
  <li>It is static. You can not change things from the calling point. Or you have to pass arguments to the decorator function before actual function parameters</li>
  <li>It creates visual noise. When the number of decorators will grow – it would pollute our functions with a huge amount of extra lines</li>
</ol>

<p>All in all, decorators make perfect sense in specific situations while are not suited for others. Good examples are: <a href="https://docs.djangoproject.com/en/2.1/topics/auth/default/#the-login-required-decorator"><code class="language-plaintext highlighter-rouge">@login_required</code></a>, <a href="https://docs.python.org/3/library/contextlib.html#contextlib.contextmanager"><code class="language-plaintext highlighter-rouge">@contextmanager</code></a>, and friends.</p>


    
      <h3 id="functional-composition">
        
        <a class="anchor" href="#functional-composition">Functional composition</a>
        
      </h3>

<p>It is quite similar to the decorator pattern, the only exception is that it is applied in the runtime, not “import” time.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">logger</span> <span class="kn">import</span> <span class="n">log</span>

<span class="k">def</span> <span class="nf">controller</span><span class="p">(</span><span class="n">products</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Product</span><span class="p">]):</span>
    <span class="n">final_price</span> <span class="o">=</span> <span class="n">log</span><span class="p">(</span><span class="n">calculate_price</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s">'Price is: {0}'</span><span class="p">)(</span><span class="n">products</span><span class="p">)</span>
    <span class="p">...</span>
</code></pre></div></div>

<ol>
  <li>With this approach, we can easily call functions the way we actually want to call them: with our without <code class="language-plaintext highlighter-rouge">log</code> part</li>
  <li>On the other hand, it creates more boilerplate and visual noise</li>
  <li>It is hard to refactor due to the higher amount of the boilerplate and since you delegate composition to the caller instead of the declaration</li>
</ol>

<p>But, it also works for some cases. For example, I use <a href="https://returns.readthedocs.io/en/latest/pages/functions.html#safe"><code class="language-plaintext highlighter-rouge">@safe</code></a> function all the time:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">returns.functions</span> <span class="kn">import</span> <span class="n">safe</span>

<span class="n">user_input</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">'Input number: '</span><span class="p">)</span>

<span class="c1"># The next line won't raise any exceptions:
</span><span class="n">safe_number</span> <span class="o">=</span> <span class="n">safe</span><span class="p">(</span><span class="nb">int</span><span class="p">)(</span><span class="n">user_input</span><span class="p">)</span>
</code></pre></div></div>

<p>You can read more about <a href="https://sobolevn.me/2019/02/python-exceptions-considered-an-antipattern">why exceptions might be harmful</a> to your business logic in a separate article. We also provide a utility type-safe <a href="https://returns.readthedocs.io/en/latest/pages/functions.html#compose"><code class="language-plaintext highlighter-rouge">compose</code></a> function in <code class="language-plaintext highlighter-rouge">returns</code> library that you might use for composing things at runtime.</p>


    
      <h3 id="passing-arguments">
        
        <a class="anchor" href="#passing-arguments">Passing arguments</a>
        
      </h3>

<p>We can always just pass arguments. As easy as that!</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">calculate_price</span><span class="p">(</span>
    <span class="n">products</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Product</span><span class="p">],</span>
    <span class="n">callback</span><span class="o">=</span><span class="n">Callable</span><span class="p">[[</span><span class="n">Decimal</span><span class="p">],</span> <span class="n">Decimal</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Decimal</span><span class="p">:</span>
    <span class="s">"""Returns the final price of all selected products (in rubles)."""</span>
    <span class="n">price</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">product</span> <span class="ow">in</span> <span class="n">products</span><span class="p">:</span>
       <span class="n">price</span> <span class="o">+=</span> <span class="n">product</span><span class="p">.</span><span class="n">price</span>

    <span class="k">return</span> <span class="n">callback</span><span class="p">(</span><span class="n">price</span><span class="p">)</span>
</code></pre></div></div>

<p>And then we can invoke it:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>

<span class="kn">from</span> <span class="nn">logger</span> <span class="kn">import</span> <span class="n">log</span>

<span class="n">price_log</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">log</span><span class="p">,</span> <span class="s">'Price is: {0}'</span><span class="p">)</span>
<span class="n">calculate_price</span><span class="p">(</span><span class="n">products_list</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">price_log</span><span class="p">)</span>
</code></pre></div></div>

<p>And it works great. Now our function does not know a thing about logging. It only calculates the price and returns the callback of it. We can now supply any callback, not just <code class="language-plaintext highlighter-rouge">log</code>. It might be any function that receives one <code class="language-plaintext highlighter-rouge">Decimal</code> and returns one back:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">make_discount</span><span class="p">(</span><span class="n">price</span><span class="p">:</span> <span class="n">Decimal</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Decimal</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">price</span> <span class="o">*</span> <span class="mf">0.95</span>

<span class="n">calculate_price</span><span class="p">(</span><span class="n">products_list</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">make_discount</span><span class="p">)</span>
</code></pre></div></div>

<p>See? No problem, just compose functions the way you like. The hidden disadvantage of this method is in the nature of function arguments. We must explicitly pass them. And if the call-stack is huge, we need to pass a lot of parameters to different functions. And potentially cover different cases: we need callback <code class="language-plaintext highlighter-rouge">A</code> in case of <code class="language-plaintext highlighter-rouge">a</code> and callback <code class="language-plaintext highlighter-rouge">B</code> in case of <code class="language-plaintext highlighter-rouge">b</code>.</p>

<p>Of course, we can try to patch them somehow, create more functions that return more functions or pollute our code with <code class="language-plaintext highlighter-rouge">@inject</code> decorators everywhere, but I think that is ugly.</p>

<p>Unsolved problems:</p>
<ol>
  <li>Mixed logic arguments and dependency arguments, because we pass them together at the same time and it hard to tell what is what</li>
  <li>Explicit arguments that can be hard or impossible to maintain if your call-stack is huge</li>
</ol>

<p>To fix these problems, let me introduce you to the concept of callable objects.</p>


    
      <h2 id="separating-logic-and-dependencies">
        
        <a class="anchor" href="#separating-logic-and-dependencies">Separating logic and dependencies</a>
        
      </h2>

<p>Before we start discussing callable objects, we need to discuss objects and OOP in general keeping SRP in mind. I see a major problem in OOP just inside its main idea: “Let’s combine <strong>data and behavior</strong> together”. For me, it is a clear violation of SRP, because objects by design do two things at once: they contain their state <strong>and</strong> have perform some attached behavior. Of course, we will eliminate this flaw with callable objects.</p>

<p>Callable objects look like regular objects with two public methods: <code class="language-plaintext highlighter-rouge">__init__</code> and <code class="language-plaintext highlighter-rouge">__call__</code>. And they follow specific rules that make them unique:</p>

<ol>
  <li>Handle only dependencies in the constructor</li>
  <li>Handle only logic arguments in the <code class="language-plaintext highlighter-rouge">__call__</code> method</li>
  <li>No mutable state</li>
  <li>No other public methods or any public attributes</li>
  <li>No parent classes or subclasses</li>
</ol>

<p>The straight-forward way to implement a callable object is something like this:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">CalculatePrice</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Decimal</span><span class="p">],</span> <span class="n">Decimal</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">_callback</span> <span class="o">=</span> <span class="n">callback</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">products</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Product</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Decimal</span><span class="p">:</span>
        <span class="n">price</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">product</span> <span class="ow">in</span> <span class="n">products</span><span class="p">:</span>
            <span class="n">price</span> <span class="o">+=</span> <span class="n">product</span><span class="p">.</span><span class="n">price</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">_callback</span><span class="p">(</span><span class="n">price</span><span class="p">)</span>
</code></pre></div></div>

<p>The main difference between callable objects and functions is that callable objects have an explicit step for passing dependencies, while functions mix regular logic arguments with dependencies together (you can already notice that callable objects are just a special case of a partial function application):</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Regular functions mix regular arguments with dependencies:
</span><span class="n">calculate_price</span><span class="p">(</span><span class="n">products_list</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">price_log</span><span class="p">)</span>

<span class="c1"># Callable objects first handle dependencies, then regular arguments:
</span><span class="n">CalculatePrice</span><span class="p">(</span><span class="n">price_log</span><span class="p">)(</span><span class="n">products_list</span><span class="p">)</span>
</code></pre></div></div>

<p>But, given example do not follow all rules we impose on callable objects. In particular, they are mutable and can have subclasses. Let’s fix that too:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">final</span>

<span class="kn">from</span> <span class="nn">attr</span> <span class="kn">import</span> <span class="n">dataclass</span>


<span class="o">@</span><span class="n">final</span>
<span class="o">@</span><span class="n">dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">slots</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">CalculatePrice</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">_callback</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Decimal</span><span class="p">],</span> <span class="n">Decimal</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">products</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Product</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Decimal</span><span class="p">:</span>
        <span class="p">...</span>
</code></pre></div></div>

<p>Now with the addition of <a href="https://sobolevn.me/2018/07/real-python-contants"><code class="language-plaintext highlighter-rouge">@final</code> decorator</a> that restricts this class to be subclassed and <a href="https://www.attrs.org/en/stable/"><code class="language-plaintext highlighter-rouge">@dataclass</code></a> decorator with <a href="http://www.attrs.org/en/stable/examples.html#immutability"><code class="language-plaintext highlighter-rouge">frozen</code></a> and <a href="http://www.attrs.org/en/stable/examples.html#slots"><code class="language-plaintext highlighter-rouge">slots</code></a> properties our class respects all the rules we impose in the beginning.</p>

<ol>
  <li>Handle only dependencies in the constructor. True, we have only declarative dependencies, the constructor is created for us by <code class="language-plaintext highlighter-rouge">attrs</code>
</li>
  <li>Handle only logic arguments in the <code class="language-plaintext highlighter-rouge">__call__</code> method. True, by definition</li>
  <li>No mutable state. True, since we use <code class="language-plaintext highlighter-rouge">frozen</code> and <code class="language-plaintext highlighter-rouge">slots</code>
</li>
  <li>No other public methods or any public attributes. Mostly true, we cannot have public attributes by declaring <code class="language-plaintext highlighter-rouge">slots</code> property and declarative protected instance attributes, but we still can have public methods. Consider using a linter for this</li>
  <li>No parent classes or subclasses. True, we explicitly inherit from <code class="language-plaintext highlighter-rouge">object</code> and marking this class <code class="language-plaintext highlighter-rouge">final</code>, so any subclasses will be restricted</li>
</ol>

<p>It now may look like an object, but it is surely not a real object. It can not have any state, public methods, or attributes. But, it is great for Single Responsibility Principle. First of all, it does not have data <strong>and</strong> behavior. Just pure behavior. Secondly, it is hard to mess things up this way. You will always have a single method to call in all the objects that you have. And this is what SRP is all about. Just make sure that this method is not too complex and does one thing. Remember, no one stops you from creating protected methods to decompose <code class="language-plaintext highlighter-rouge">__call__</code> behavior.</p>

<p>However, we have not fixed the second problem of passing dependencies as arguments to functions (or callable objects): noisy explicitness.</p>


    
      <h2 id="dependency-injection">
        
        <a class="anchor" href="#dependency-injection">Dependency injection</a>
        
      </h2>

<p><a href="https://en.wikipedia.org/wiki/Dependency_injection">DI pattern</a> is widely known and used outside of the <code class="language-plaintext highlighter-rouge">python</code> world. But, for some reason is not very popular inside it. I think that this is a bug that should be fixed.</p>

<p>Let’s see a new example. Imagine that we have postcards sending app. Users create postcards to send them to other users on specific dates: holidays, birthdays, etc. We are also interested in how many of them were sent for analytic purposes. Let’s see how this use-case will look like:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">project.postcards.repository</span> <span class="kn">import</span> <span class="n">PostcardsForToday</span>
<span class="kn">from</span> <span class="nn">project.postcards.services</span> <span class="kn">import</span> <span class="p">(</span>
   <span class="n">SendPostcardsByEmail</span><span class="p">,</span>
   <span class="n">CountPostcardsInAnalytics</span><span class="p">,</span>
<span class="p">)</span>

<span class="o">@</span><span class="n">final</span>
<span class="o">@</span><span class="n">dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">slots</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">SendTodaysPostcardsUsecase</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">_repository</span><span class="p">:</span> <span class="n">PostcardsForToday</span>
    <span class="n">_email</span><span class="p">:</span> <span class="n">SendPostcardsByEmail</span>
    <span class="n">_analytics</span><span class="p">:</span> <span class="n">CountPostcardInAnalytics</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">today</span><span class="p">:</span> <span class="n">datetime</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">postcards</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">_repository</span><span class="p">(</span><span class="n">today</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">_email</span><span class="p">(</span><span class="n">postcards</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">_analytics</span><span class="p">(</span><span class="n">postcards</span><span class="p">)</span>
</code></pre></div></div>

<p>Next, we have to invoke this callable class:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Injecting dependencies:
</span><span class="n">send_postcards</span> <span class="o">=</span> <span class="n">SendTodaysPostcardsUsecase</span><span class="p">(</span>
    <span class="n">PostcardsForToday</span><span class="p">(</span><span class="n">db</span><span class="o">=</span><span class="n">Postgres</span><span class="p">(</span><span class="s">'postgres://...'</span><span class="p">)),</span>
    <span class="n">SendPostcardsByEmail</span><span class="p">(</span><span class="n">email</span><span class="o">=</span><span class="n">SendGrid</span><span class="p">(</span><span class="s">'username'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)),</span>
    <span class="n">CountPostcardInAnalytics</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">GoogleAnalytics</span><span class="p">(</span><span class="s">'google'</span><span class="p">,</span> <span class="s">'admin'</span><span class="p">)),</span>
<span class="p">)</span>

<span class="c1"># Actually invoking postcards send:
</span><span class="n">send_postcards</span><span class="p">(</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">())</span>
</code></pre></div></div>

<p>The problem is clearly seen in this example. We have a lot of dependencies-related boilerplate. Every time we create an instance of <code class="language-plaintext highlighter-rouge">SendTodaysPostcardsUsecase</code> – we have to create all its dependencies. Going all the way deep.</p>

<p>And all this boilerplate seems redundant. We have already specified all types of expected dependencies in our class. And transitive dependencies in our class’s dependencies, and so on. Why do we have to duplicate this code once again?</p>

<p>Actually, we don’t have to. We can use some kind of DI framework. I can personally recommend <a href="https://github.com/dry-python/dependencies"><code class="language-plaintext highlighter-rouge">dependencies</code></a> or <a href="https://github.com/bobthemighty/punq"><code class="language-plaintext highlighter-rouge">punq</code></a>. Their main difference is in how they resolve dependencies: <code class="language-plaintext highlighter-rouge">dependencies</code> uses names and <code class="language-plaintext highlighter-rouge">punq</code> uses types. We would go with <code class="language-plaintext highlighter-rouge">punq</code> for this example.</p>

<p>Do not forget to install it:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install </span>punq
</code></pre></div></div>

<p>Now our code can be simplified so we won’t have to mess with dependencies. We create a single place where all the dependencies are registered:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># project/implemented.py
</span>
<span class="kn">import</span> <span class="nn">punq</span>

<span class="n">container</span> <span class="o">=</span> <span class="n">punq</span><span class="p">.</span><span class="n">Container</span><span class="p">()</span>

<span class="c1"># Low level dependencies:
</span><span class="n">container</span><span class="p">.</span><span class="n">register</span><span class="p">(</span><span class="n">Postgres</span><span class="p">)</span>
<span class="n">container</span><span class="p">.</span><span class="n">register</span><span class="p">(</span><span class="n">SendGrid</span><span class="p">)</span>
<span class="n">container</span><span class="p">.</span><span class="n">register</span><span class="p">(</span><span class="n">GoogleAnalytics</span><span class="p">)</span>

<span class="c1"># Intermediate dependencies:
</span><span class="n">container</span><span class="p">.</span><span class="n">register</span><span class="p">(</span><span class="n">PostcardsForToday</span><span class="p">)</span>
<span class="n">container</span><span class="p">.</span><span class="n">register</span><span class="p">(</span><span class="n">SendPostcardsByEmail</span><span class="p">)</span>
<span class="n">container</span><span class="p">.</span><span class="n">register</span><span class="p">(</span><span class="n">CountPostcardInAnalytics</span><span class="p">)</span>

<span class="c1"># End dependencies:
</span><span class="n">container</span><span class="p">.</span><span class="n">register</span><span class="p">(</span><span class="n">SendTodaysPostcardsUsecase</span><span class="p">)</span>
</code></pre></div></div>

<p>And then use it everywhere:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">project.implemented</span> <span class="kn">import</span> <span class="n">container</span>

<span class="n">send_postcards</span> <span class="o">=</span> <span class="n">container</span><span class="p">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">SendTodaysPostcardsUsecase</span><span class="p">)</span>
<span class="n">send_postcards</span><span class="p">(</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">())</span>
</code></pre></div></div>

<p>There’s literally no repeated boilerplate, readability, and type-safety out-of-the-box. We now do not have to manually wire any dependencies together. They will be wired by annotations by <code class="language-plaintext highlighter-rouge">punq</code>. Just type your declarative fields in callable objects the way you need, register dependencies in the container, and you are ready to go.</p>

<p>Of course, there are some advanced typing patterns for better Inversion of Control, but it is better covered in <a href="https://punq.readthedocs.io/en/latest/"><code class="language-plaintext highlighter-rouge">punq</code>’s docs</a>.</p>


    
      <h2 id="when-not-to-use-callable-objects">
        
        <a class="anchor" href="#when-not-to-use-callable-objects">When not to use callable objects</a>
        
      </h2>

<p>It is quite obvious that all programming concepts have their limitations.
Callable objects should not be used in the infrastructure layer of your application. Since there are too many existing APIs that do not support this kind of classes and API. Use it inside your business logic to make it more readable and maintainable.</p>

<p>Consider adding <a href="https://github.com/dry-python/returns"><code class="language-plaintext highlighter-rouge">returns</code></a> library to the mix, so you can <a href="https://sobolevn.me/2019/02/python-exceptions-considered-an-antipattern">get rid of exceptions</a> as well.</p>


    
      <h2 id="conclusion">
        
        <a class="anchor" href="#conclusion">Conclusion</a>
        
      </h2>

<p>We came a long way. From absolutely messy functions that do scary things to simple callable objects with dependency injection that respect Single Responsibility Principle. We have discovered different tools, practices, and patterns along the way.</p>

<p>But did our efforts make a big change? The most important question to ask yourself: is my code better after all this refactoring?</p>

<p>My answer is: yes. This made a significant change for me. I can compose simple building blocks into complex use-cases with ease. It is typed, testable, and readable.</p>

<p>What do you think? Share your opinion in the comments below.</p>

<p>Key takeaways:</p>
<ol>
  <li>Use simple building blocks that compose easily</li>
  <li>To be composable all entities should be responsible for one thing only</li>
  <li>Use code quality tools to make sure that these blocks are truly “simple”</li>
  <li>To make high-level things responsible for just one thing – use the composition of simple blocks</li>
  <li>To handle composition dependencies use callable objects</li>
  <li>Use dependency injection to reduce the boilerplate of composition</li>
</ol>

<p>That’s it!</p>


    
      <h2 id="gratis">
        
        <a class="anchor" href="#gratis">Gratis</a>
        
      </h2>

<p>Thanks for reviewing this post to <code class="language-plaintext highlighter-rouge">@malev</code> and <code class="language-plaintext highlighter-rouge">@kxepal</code>.</p>

    </div>

    <hr>

    <div class="post-subscribe">
      <h2>
        <a href="https://sobolevn.me/subscribe">
          Subscribe to my blog if you want more
        </a>
      </h2>
    </div>

    
    
    <div class="post-republish">
      <h4>Republished as:</h4>
      <ul>
      
        <li>
          <a class="c-article__repost" href="https://dev.to/wemake-services/enforcing-single-responsibility-principle-in-python-2il8" target="_blank">
            
            dev.to <img class="emoji" title=":us:" alt=":us:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f1fa-1f1f8.png" height="20" width="20">
          </a>
        </li>
      
      </ul>
    </div>
    
  </div>

  <!-- Disqus comments view -->
  
  <div class="post-disqus" id="discussion">
    <div id="disqus_thread"></div>

<script>
/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/

var disqus_config = function () {
this.page.url = "http://localhost:4000/2019/03/enforcing-srp";
this.page.identifier = "/2019/03/enforcing-srp";
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://sobolevn-me.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>

  </div>
  
</article>

  </div>
  <footer class="c-page__footer">
  <p>
    <i class="far fa-copyright"></i>
    <a href="https://sobolevn.me/about/">sobolevn</a>
    2023,
    content licensed
    <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">
      CC BY-NC
    </a>,
    <a href="https://github.com/sobolevn/sobolevn.github.io" target="_blank">
      source code
    </a>
  </p>

  <p>
    <a href="mailto:mail@sobolevn.me" alt="email">
      <i class="far fa-2x fa-envelope"></i>
    </a>
    <a href="https://github.com/sobolevn" alt="github">
      <i class="fab fa-2x fa-github"></i>
    </a>
    <a href="https://dev.to/sobolevn" alt="practicaldev">
      <i class="fab fa-2x fa-dev"></i>
    </a>
    <a href="https://medium.com/@sobolevn" alt="medium">
      <i class="fab fa-2x fa-medium"></i>
    </a>
    <a href="https://stackoverflow.com/users/4842742/sobolevn" alt="stackoverflow">
      <i class="fab fa-2x fa-stack-overflow"></i>
    </a>
  </p>
</footer>

</div>

    </main>

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-66588818-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-66588818-1');
</script>

  </body>
</html>
