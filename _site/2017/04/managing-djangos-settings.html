<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Favicon -->
  <link rel="apple-touch-icon" sizes="57x57" href="/assets/images/favicons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/assets/images/favicons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/assets/images/favicons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/assets/images/favicons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/assets/images/favicons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/assets/images/favicons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/assets/images/favicons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/assets/images/favicons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicons/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/assets/images/favicons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/assets/images/favicons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicons/favicon-16x16.png">
<link rel="manifest" href="/assets/images/favicons/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/assets/images/favicons/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">


  <!-- Meta information -->
  <title>Managing Django’s settings</title>
  <meta name="description"
        content="">
  <link rel="canonical"
        href="http://localhost:4000/2017/04/managing-djangos-settings" />

  <!-- Open search scheme -->
  <link rel="search"
        type="application/opensearchdescription+xml"
        title="sobolevn.me"
        href="/opensearch.xml" />

  <!-- Feed -->
  <link rel="alternate" type="application/rss+xml" title="rishi raj's blog"
        href="/feed.xml" />

  <!-- Custom fonts -->
  <link href="https://fonts.googleapis.com/css?family=Merriweather:400,400i,900|Roboto+Mono:400,400i|Montserrat:400,800" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">

  <!-- Custom style -->
  <link rel="stylesheet" href="/css/main.css" />

  <!-- Global site tag (gtag.js) - Google Ads: 839642990 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=AW-839642990"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'AW-839642990');
  </script>
</head>


  <body>
    <main class="u-container">
      <div class="c-page">
  <header class="c-page__header">
  <h1><code>rishi raj's blog</code></h1>

  

  <nav role="navigation">
    <a href="/" role="menuitem">
      Blog
    </a>

    <span class="u-separate"></span>
    <a href="/talks/" role="menuitem">
      Talks
    </a>

    <span class="u-separate"></span>
    <a href="/activities/" role="menuitem">
      Activities
    </a>

    <span class="u-separate"></span>
    <a href="/about/" role="menuitem">
      About
    </a>

    <span class="u-separate"></span>
    <a href="/subscribe/" role="menuitem">
      Subscribe
    </a>
  </nav>
</header>

  <div class="c-page__main">
    <article class="c-article" itemscope="" itemtype="http://schema.org/BlogPosting">
  <header class="c-article__header">
    <h1 class="c-article__title" itemprop="name">Managing Django’s settings</h1>
    <p class="c-article__time">
      <small>
        <time datetime="2017-04-01T00:00:00+05:30" itemprop="datePublished">
          April 1, 2017
        </time>
      </small>
      <small><span class="reading-time" title="Estimated read time">
  
  
    4 mins
   read
</span>
</small>
      <small><a href="#discussion">Start a discussion</a></small>
      <small><a href="https://github.com/sobolevn/sobolevn.github.io/blob/master/_posts/2017-04-01-managing-djangos-settings.md">Edit this page</a></small>
    </p>
  </header>

  <!-- Post Tags -->
  <!-- <ul class="c-tags">
    
    <li class="c-tag">python</li>
    
    <li class="c-tag">django</li>
    
  </ul> -->

  <!-- Content -->
  <div class="c-article__main">

    

    <div class="c-article__body" itemprop="articleBody">
      <p><img src="https://cdn-images-1.medium.com/max/1600/1*ogBWTa2xptrsZXMB34Pzgw.png" alt="django-split-settings logo"></p>

<p>Managing Django’s settings might be tricky. There are severals issues which are encountered by any Django developer along the way.</p>

<p>First one is caused by the default project structure. Django clearly offers us a single <code class="language-plaintext highlighter-rouge">settings.py</code> file. It seams reasonable at the first glance. And it is actually easy to use just after the start. But when it comes to the real-world it only causes misunderstanding and frustration.</p>

<p>At some point, you will need to put some kind of personal settings in the main file: certificate paths, your username or password, database connection, etc. But putting your user-specific values inside the common settings is a bad practice. Other developers would have other settings, and it would just not work for all of you. The most known hack for this situation is <code class="language-plaintext highlighter-rouge">local_settings.py</code>. This file is placed near the regular settings file and ignored from version control. There are also these lines which are usually put somewhere in the end of <code class="language-plaintext highlighter-rouge">settings.py</code>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">local_settings</span> <span class="kn">import</span> <span class="o">*</span>
<span class="k">except</span> <span class="nb">ImportError</span><span class="p">:</span>
    <span class="c1"># No local settings was found, skipping.
</span>    <span class="k">pass</span>
</code></pre></div></div>

<p>Looks pretty straight-forward. It is also sometimes accompanied with <code class="language-plaintext highlighter-rouge">local_settings.py.template</code>, which is version controlled, to keep your local settings structure up to date.</p>

<p>You would definitely need production settings sometime soon. How would you do that? Create a new file. Do you need special settings for testing? Create a new file. Staging? New file. <em>You would have a lot of files.</em></p>

<p>Secondly, when you have a lot of things to configure, your settings files will become long and heavy. At this point you would start to think: maybe I could separate these values into different files and reuse them at different environments? If this thought has ever come to your mind — you should give <a href="https://github.com/sobolevn/django-split-settings">django-split-settings</a> a try.</p>


      <h2 id="usage">
        
        <a class="anchor" href="#usage">Usage</a>
        
      </h2>

<p>How does <code class="language-plaintext highlighter-rouge">django-split-settings</code> solve these issues? This helper provides a user-friendly interface to store your settings in different files. Let’s look at the example. Imagine you have an existing project with <code class="language-plaintext highlighter-rouge">django</code>, <code class="language-plaintext highlighter-rouge">postgres</code>, <code class="language-plaintext highlighter-rouge">redis</code>, <code class="language-plaintext highlighter-rouge">rq</code>, and emails.</p>

<p>Before we start, let’s install <code class="language-plaintext highlighter-rouge">django-split-settings</code> with:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install </span>django-split-settings
</code></pre></div></div>

<p>That’s what your files would look like after adopting <code class="language-plaintext highlighter-rouge">django-split-settings</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>your_project/settings/
├── __init__.py
├── components
│   ├── __init__.py
│   ├── database.py
│   ├── common.py
│   ├── emails.py
│   ├── rq.py
└── environments
    ├── __init__.py
    ├── development.py
    ├── local.py.template
    ├── production.py
    └── testing.py
</code></pre></div></div>

<p>That’s a clear separation of the settings based on two factors: what component they are configuring and at what environment we are working right now. And the flexibility of the library allows you to have any structure you want, not just the one described here.</p>

<p>In our <code class="language-plaintext highlighter-rouge">settings/__init__.py</code> we can define any logic we want. Basically, we would just define what kind of components we would like to use and select the environment. Here’s an example, we use in production for all our projects:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">"""
This is a django-split-settings main file.
For more information read this:
https://github.com/sobolevn/django-split-settings
Default environment is `developement`.
To change settings file:
`DJANGO_ENV=production python manage.py runserver`
"""</span>

<span class="kn">from</span> <span class="nn">split_settings.tools</span> <span class="kn">import</span> <span class="n">optional</span><span class="p">,</span> <span class="n">include</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">environ</span>

<span class="n">ENV</span> <span class="o">=</span> <span class="n">environ</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'DJANGO_ENV'</span><span class="p">)</span> <span class="ow">or</span> <span class="s">'development'</span>

<span class="n">base_settings</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">'components/common.py'</span><span class="p">,</span>  <span class="c1"># standard django settings
</span>    <span class="s">'components/database.py'</span><span class="p">,</span>  <span class="c1"># postgres
</span>    <span class="s">'components/rq.py'</span><span class="p">,</span>  <span class="c1"># redis and redis-queue
</span>    <span class="s">'components/emails.py'</span><span class="p">,</span>  <span class="c1"># smtp
</span>
    <span class="c1"># You can even use glob:
</span>    <span class="c1"># 'components/*.py'
</span>
    <span class="c1"># Select the right env:
</span>    <span class="s">'environments/{0}.py'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">ENV</span><span class="p">),</span>
    <span class="c1"># Optionally override some settings:
</span>    <span class="n">optional</span><span class="p">(</span><span class="s">'environments/local.py'</span><span class="p">),</span>
<span class="p">]</span>

<span class="c1"># Include settings:
</span><span class="n">include</span><span class="p">(</span><span class="o">*</span><span class="n">base_settings</span><span class="p">)</span>
</code></pre></div></div>

<p>And that’s it. Our application would run as usual. We have achieved multiple goals with so few lines of code:</p>

<ol>
  <li>We now have separated settings based on what they configure. Gaining readability and maintainability</li>
  <li>We now have separated settings based on environment</li>
  <li>We now have optional local settings with now dirty hacks</li>
  <li>We did not have to do any refactoring except just some basic restructuring</li>
</ol>

<p>We have also created a project example, which can be used as a template for your own projects: <a href="https://github.com/wemake-services/wemake-django-template">https://github.com/wemake-services/wemake-django-template</a></p>


    
      <h2 id="whats-not-covered">
        
        <a class="anchor" href="#whats-not-covered">What’s not covered</a>
        
      </h2>

<p>In a future articles we would cover two topics which are crucial when dealing with project’s configuration:</p>

<ol>
  <li>Secret settings</li>
  <li>Dynamic settings</li>
</ol>


    
      <h2 id="afterword">
        
        <a class="anchor" href="#afterword">Afterword</a>
        
      </h2>

<p>Got any ideas or feedback? Dive in, if you want to contribute:
<a href="https://github.com/sobolevn/django-split-settings">django-split-settings - Organize Django settings into multiple files and directories.</a></p>

    </div>

    <hr>

    <div class="post-subscribe">
      <h2>
        <a href="https://sobolevn.me/subscribe">
          Subscribe to my blog if you want more
        </a>
      </h2>
    </div>

    
    
    <div class="post-republish">
      <h4>Republished as:</h4>
      <ul>
      
        <li>
          <a class="c-article__repost" href="https://medium.com/wemake-services/managing-djangos-settings-e2b7f496120d" target="_blank">
            
            medium.com <img class="emoji" title=":us:" alt=":us:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f1fa-1f1f8.png" height="20" width="20">
          </a>
        </li>
      
        <li>
          <a class="c-article__repost" href="https://dev.to/wemake-services/managing-djangos-settings-37ao" target="_blank">
            
            dev.to <img class="emoji" title=":us:" alt=":us:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f1fa-1f1f8.png" height="20" width="20">
          </a>
        </li>
      
      </ul>
    </div>
    
  </div>

  <!-- Disqus comments view -->
  
</article>

  </div>
  <footer class="c-page__footer">
  <p>
    <i class="far fa-copyright"></i>
    <a href="https://sobolevn.me/about/">imrishi</a>
    2023,
    content licensed
    <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">
      CC BY-NC
    </a>,
    <a href="https://github.com/sobolevn/sobolevn.github.io" target="_blank">
      source code
    </a>
  </p>

  <p>
    <a href="mailto:r@rishi.im" alt="email">
      <i class="far fa-2x fa-envelope"></i>
    </a>
    <a href="https://github.com/sobolevn" alt="github">
      <i class="fab fa-2x fa-github"></i>
    </a>
    <a href="https://dev.to/sobolevn" alt="practicaldev">
      <i class="fab fa-2x fa-dev"></i>
    </a>
    <a href="https://medium.com/@sobolevn" alt="medium">
      <i class="fab fa-2x fa-medium"></i>
    </a>
    <a href="https://stackoverflow.com/users/4842742/sobolevn" alt="stackoverflow">
      <i class="fab fa-2x fa-stack-overflow"></i>
    </a>
  </p>
</footer>

</div>

    </main>

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-66588818-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-66588818-1');
</script>

  </body>
</html>
